// 진주성의 최후 9일 — 시드 데이터 (JSON structured)

export const JINJU_SYNOPSIS = {
    title: '진주성의 최후 9일',
    titleEn: 'The Last 9 Days of Jinju Castle',

    info: {
        genre: '역사 전쟁 드라마',
        runtime: '10~15분 (5화 시리즈 또는 단편)',
        tone: '비장미, 처절한 아름다움, 묵직한 슬픔',
        audience: '역사 콘텐츠 애호가, 한국 전쟁사 관심층',
        format: 'AI 영상 생성 기반 역사 시네마틱 단편',
    },

    logline: '1593년 6월, 일본군 9만 3천의 복수전이 시작된다 — 진주성 안 6만의 군민은 9일간 버텨내지만, 마지막 날 성벽이 무너지고 촉석루에 선 의기 논개는 적장을 껴안은 채 남강에 몸을 던진다. 모든 것이 끝난 자리에 핀 꽃 한 송이.',

    theme: '"지킬 수 없는 것을 지키려 할 때, 인간은 가장 아름답다." — 승리가 불가능한 전장에서 왜 끝까지 싸우는가. 패배의 역사 속에서 빛나는 인간 존엄의 마지막 불꽃.',

    acts: [
        {
            title: '도입',
            subtitle: 'DAY 1-2 — 먹구름',
            content: `1593년 음력 6월, 진주성 남강 위로 황혼이 내린다. 성벽 위에 선 김천일(金千鎰, 60)은 수평선 너머 먼지 구름이 피어오르는 것을 본다. 적의 선봉.

1차 진주성 전투(1592년)에서 3,800명으로 2만 왜군을 격퇴한 진주성은 조선의 상징이 되었다. 하지만 그 대가로 성주 김시민 장군은 전사했고, 히데요시는 분노에 미쳤다. "개미 한 마리 남기지 말라."

지금 성 안에는 군사 6천과 피란민 6만이 뒤섞여 있다. 성 밖에는 가토 기요마사, 우키타 히데이에 등 왜란의 핵심 장수들이 이끄는 9만 3천 대군이 포위를 완성한다. 15:1. 수학적으로 승리는 불가능하다.

김천일은 묻는다 — "물러날 것인가?"
서예원(徐禮元)이 답한다 — "물러날 곳이 없습니다."`,
        },
        {
            title: '전개',
            subtitle: 'DAY 3-6 — 혈전',
            content: `왜군의 첫 총공격. 성벽 위에서 돌과 화살이 쏟아진다. 여성들이 끓인 물을 나르고, 아이들이 돌을 줍는다.

거북선 모양의 목차(木車)가 성벽에 접근한다. 왜군은 성벽 아래 땅굴을 판다. 인분과 독초를 섞어 성 안에 던진다.

황진(黃進) 장군이 성벽 위에서 적의 저격수에게 관통당한다. 쓰러지면서도 그는 "성벽을 지켜라"라 외친다.

DAY 5: 비가 쏟아진다. 성벽 일부가 흙과 함께 무너진다. 병사들이 몸으로 틈을 막는다. 말 그대로 살(肉)벽이 된다.

민중의 눈빛이 변한다. 공포에서 분노로, 분노에서 체념으로, 체념에서 초월로.

이 와중에 기생 논개(論介)는 부상병들의 상처를 씻기며 자신의 옷자락을 찢어 붕대를 만든다. 그녀의 눈에는 눈물이 마른 지 오래다.`,
        },
        {
            title: '위기',
            subtitle: 'DAY 7-8 — 무너짐',
            content: `DAY 7: 성의 동쪽 벽이 완전히 붕괴된다. 왜군이 홍수처럼 밀려들어온다. 거리마다 백병전이 벌어진다. 칼 없는 자는 돌을 들고, 돌마저 없는 자는 맨손으로 적의 목을 잡는다.

김천일은 아들 김상건(金象乾)과 함께 서 있다. "아비와 아들이 같은 날 죽을 수 있으니 이것이 불행인가, 다행인가." 두 부자가 남강을 향해 걸어간다.

최경회(崔慶會)가 칼을 꽂고 강에 뛰어든다. 서예원이 뒤따른다. 고종후(高從厚)가 뒤따른다. 남강 위로 몸을 던지는 사람들의 행렬.

강물이 핏빛으로 물든다. "3일간 강물을 마실 수 없었다"라고 기록은 전한다.`,
        },
        {
            title: '결말',
            subtitle: 'DAY 9 — 꽃',
            content: `학살이 끝난 밤. 촉석루에 왜장들이 모여 연회를 벌인다. 술잔이 오가고, 승전의 웃음이 퍼진다.

논개가 기생으로 연회에 나선다. 열 손가락에 가락지를 끼우고, 곱게 단장한 얼굴에 미소를 띤다.

그녀가 왜장 게야무라 로쿠스케에게 다가간다. 술을 따르고, 춤을 추고, 그의 손을 잡는다.

촉석루 끝, 남강이 보이는 난간. 논개는 왜장을 껴안은 채 난간 위로 올라선다.

적장의 눈이 공포로 뒤집히는 순간, 논개의 입가에 미소가 번진다. 가락지 낀 손이 적장의 옷깃을 움켜쥐고 — 놓지 않는다.

두 사람의 몸이 남강으로 떨어진다.

수면 위로 퍼지는 원(圓). 그 위에 촉석루의 불빛이 반사된다.

암전 —

자막: "1593년 6월 29일, 진주성 함락. 6만~7만의 조선인이 학살당했다. 군인은 1만도 되지 않았다. 대부분이 민간인이었다."`,
        },
    ],

    characters: [
        {
            name: '김천일',
            nameHanja: '金千鎰',
            role: '의병장',
            age: '60대',
            appearance: '백발이 섞인 수염, 구부정하지만 단단한 어깨',
            personality: '묵직한 카리스마, 과묵하지만 행동으로 보여줌',
            motivation: '조국과 백성을 지키겠다는 의지',
            arc: '희망 → 각오 → 초월 (아들과 함께 남강에 투신)',
        },
        {
            name: '논개',
            nameHanja: '論介',
            role: '기생/의기',
            age: '20대 초반',
            appearance: '고운 얼굴, 차분한 눈매, 가녀린 체구',
            personality: '겉으로 온순하나 내면에 불꽃을 품은',
            motivation: '9일간 목격한 학살에 대한 침묵의 복수',
            arc: '돌보는 자 → 지켜보는 자 → 복수하는 자',
        },
        {
            name: '황진',
            nameHanja: '黃進',
            role: '장군',
            age: '50대',
            appearance: '전투 흉터가 있는 강인한 체격',
            personality: '불같은 용기, 병사에 대한 깊은 애정',
            motivation: '군인으로서의 마지막 책무',
            arc: '전투 → 부상 → 전사 (성벽 위에서 쓰러짐)',
        },
        {
            name: '게야무라 로쿠스케',
            nameHanja: '',
            role: '왜장',
            age: '',
            appearance: '화려한 갑주, 자만에 찬 표정',
            personality: '오만, 승전에 도취된',
            motivation: '전리품과 공명',
            arc: '승자 → 사냥감 (논개에 의해 남강에 투신)',
        },
    ],

    visualTone: {
        palette: '도입은 황혼의 호박색, 전투는 잿빛과 검붉은색, 결말은 달빛의 차가운 은청색. 피와 불의 대비.',
        lighting: '자연광 기반 — 새벽/황혼/야간. 횃불과 화염이 주요 광원, 역광 실루엣 다수 사용.',
        camera: '도입은 드론 항공, 전투는 핸드헬드/스테디캠, 논개 씬은 느린 돌리+고정의 대비.',
        references: '명량(2014), 안시성(2018), 호우 샤오시엔의 자객 섭은낭, 쿠로사와 란',
    },

    sound: {
        bgm: '한국 전통 악기 기반 — 해금의 비명, 대금의 바람, 거문고의 묵직한 저음. 클라이맥스에서 현대 오케스트라와 합류.',
        sfx: '화살이 살을 뚫는 소리, 성벽이 무너지는 둔탁한 진동, 남강의 물소리, 마지막 씬의 정적(침묵).',
        narration: '없음. 자막과 영상으로만 전달.',
    },

    keyScenes: [
        { title: '먹구름', description: '수평선에서 피어오르는 먼지, 15:1의 수를 깨닫는 김천일' },
        { title: '첫 번째 파도', description: '성벽 위에서 돌과 끓는 물이 쏟아지는 첫 전투' },
        { title: '살벽', description: '무너진 성벽을 몸으로 막는 병사들, 비에 젖은 밤' },
        { title: '황진의 최후', description: '적탄에 관통당하며 "성벽을 지켜라" 외치는 장군' },
        { title: '부자의 강', description: '김천일이 아들과 함께 남강에 걸어 들어가는 장면' },
        { title: '가락지', description: '논개가 열 손가락에 가락지를 끼우는 클로즈업' },
        { title: '꽃, 물 위에', description: '논개와 적장이 남강에 떨어진 후, 수면 위의 파문' },
    ],
};

export const JINJU_PROJECT = {
    id: 'proj_jinju_9days',
    title: '진주성의 최후 9일',
    description: '1593년 제2차 진주성 전투. 9만 3천 왜군에 맞서 9일간 버틴 6만 군민의 마지막 이야기.',
    status: 'progress',
};

// JSON → Markdown 변환 함수
export function synopsisToMarkdown(s) {
    if (!s) return '';
    let md = '';
    md += `═══════════════════════════════════════\n`;
    md += `         ${s.title}\n`;
    if (s.titleEn) md += `    ${s.titleEn}\n`;
    md += `═══════════════════════════════════════\n\n`;

    md += `■ 기본 정보\n`;
    md += `  ├ 장르: ${s.info.genre}\n`;
    md += `  ├ 러닝타임: ${s.info.runtime}\n`;
    md += `  ├ 톤 & 무드: ${s.info.tone}\n`;
    md += `  ├ 타깃 오디언스: ${s.info.audience}\n`;
    md += `  └ 형식: ${s.info.format}\n\n`;

    md += `■ 로그라인\n  ${s.logline}\n\n`;
    md += `■ 테마\n  ${s.theme}\n\n`;

    md += `■ 시놉시스 본문\n\n`;
    const actIcons = ['┌─', '├─', '├─', '└─'];
    s.acts.forEach((act, i) => {
        md += `  ${actIcons[i] || '├─'} ${act.title} (${act.subtitle})\n`;
        act.content.split('\n').forEach(line => {
            md += `  │  ${line}\n`;
        });
        md += `  │\n`;
    });

    md += `\n■ 주요 인물\n\n`;
    s.characters.forEach((ch, i) => {
        const prefix = i === 0 ? '┌─' : i === s.characters.length - 1 ? '└─' : '├─';
        md += `  ${prefix} ${ch.name}${ch.nameHanja ? ` (${ch.nameHanja})` : ''} — ${ch.role}${ch.age ? `, ${ch.age}` : ''}\n`;
        md += `  │  · 외형: ${ch.appearance}\n`;
        md += `  │  · 성격: ${ch.personality}\n`;
        md += `  │  · 동기: ${ch.motivation}\n`;
        md += `  │  · 아크: ${ch.arc}\n`;
        md += `  │\n`;
    });

    md += `\n■ 비주얼 톤 & 미장센\n`;
    md += `  · 색감/팔레트: ${s.visualTone.palette}\n`;
    md += `  · 조명: ${s.visualTone.lighting}\n`;
    md += `  · 카메라: ${s.visualTone.camera}\n`;
    md += `  · 참고 레퍼런스: ${s.visualTone.references}\n\n`;

    md += `■ 사운드 & 음악 방향\n`;
    md += `  · BGM: ${s.sound.bgm}\n`;
    md += `  · 효과음: ${s.sound.sfx}\n`;
    md += `  · 내레이션: ${s.sound.narration}\n\n`;

    md += `■ 핵심 장면 리스트 (${s.keyScenes.length}개)\n`;
    s.keyScenes.forEach((scene, i) => {
        md += `  ${i + 1}. [${scene.title}] — ${scene.description}\n`;
    });

    return md;
}
