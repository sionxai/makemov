---
name: 시나리오 작성 (Screenplay Writing)
description: 확정된 시놉시스를 촬영 가능한 씬 단위 시나리오로 변환한다. 런타임 기반 밀도 공식, ACT-씬 타임코드 정합 규칙, 품질 게이트를 포함.
---

# Screenplay Writing Skill v2.0

## 1. 목표

확정된 시놉시스(synopsis JSON)를 촬영/편집 가능한 씬 단위 시나리오로 변환한다.

### 핵심 원칙
> **시놉시스의 `info.runtime`이 시나리오의 밀도를 결정한다.**
> 80초짜리 숏츠 광고와 10분짜리 단편은 같은 구조가 될 수 없다.

---

## 2. 입력 / 출력

| 항목 | 형식 | 설명 |
|------|------|------|
| **입력** | synopsis JSON | `info.runtime`, `acts[]`, `characters[]`, `keyScenes[]` |
| **출력 1** | scenes JSON (배열) | `number`, `scene_id`, `heading`, `action`, `dialogue`, `notes` |
| **출력 2** | 읽기용 시나리오 (MD) | 씬 헤더 + 타임코드 + 액션/대사 |

---

## 3. 런타임 → 밀도 공식 ★

### 3.1 런타임 파싱

```
"80초 숏츠 광고"  → 80 seconds
"10분 단편"       → 600 seconds
"10~15분"         → 600 seconds (최소값 적용)
```

### 3.2 밀도 테이블

| 런타임 | 최소 씬 수 | 씬당 min action | 씬당 min total | 전체 min total |
|--------|-----------|-----------------|----------------|----------------|
| ≤ 120초 | 5 | 50자 | 80자 | 500자 |
| ≤ 5분 | 8 | 100자 | 150자 | 1,200자 |
| ≤ 10분 | 12 | 150자 | 250자 | 3,000자 |
| ≤ 15분 | 16 | 180자 | 280자 | 4,500자 |
| > 15분 | 20 | 200자 | 300자 | 6,000자 |

### 3.3 씬당 평균 시간 가이드

```
목표: 씬당 40~60초
  - 80초   → 5~8씬 (빠른 컷)
  - 5분    → 8~12씬
  - 10분   → 12~15씬
  - 15분   → 16~22씬
```

> **씬 하나가 90초 이상이면 분할을 검토한다.**

---

## 4. ACT ↔ 씬 타임코드 정합 규칙 ★

### 4.1 필수 규칙

1. 시놉시스 `acts[].subtitle`의 타임코드 범위와 시나리오 `notes`의 러닝타임이 **완전히 겹쳐야** 한다.
2. 시나리오 첫 씬 시작 = `00:00`, 마지막 씬 끝 = `info.runtime` 총 시간
3. 씬과 씬 사이에 **타임 갭이 없어야** 한다 (`S(n+1).start == S(n).end`)
4. 각 ACT 범위 안에 **최소 2개 씬**이 포함되어야 한다 (마지막 ACT는 1개 허용)

### 4.2 타임코드 정합 체크리스트

```
✅ S1.start == 00:00
✅ S(last).end == total runtime
✅ 각 S(n+1).start == S(n).end  (갭 없음)
✅ 각 ACT 범위 안에 씬 2개 이상 (마지막 ACT 제외)
✅ 어떤 씬도 90초를 초과하지 않음
```

---

## 5. 씬 구조

### 5.1 scenes JSON 포맷

```javascript
{
  number: 1,
  scene_id: 'S1',
  heading: 'EXT/INT. 장소 - 시간대',
  action: '...',      // 화면에 보이는 것 (시각·동작·분위기 묘사)
  dialogue: '...',    // 대사·음성 (없으면 빈 문자열)
  notes: '러닝타임 00:00~01:10. 연출 지시.',
}
```

### 5.2 action 작성 규칙 (런타임별)

| 런타임 구간 | action 특성 |
|------------|------------|
| ≤ 120초 | 1~2문장. 핵심 비주얼만. 컷 전환이 빠르므로 간결하게. |
| 3~5분 | 2~3문장. 공간 설정 + 인물 동작 + 분위기. |
| **5~10분** | **3~5문장. 공간 세부 묘사 + 인물 동작 + 표정/감정 + 소품 디테일 + 분위기 전환.** |
| 10분+ | 4~6문장. 위에 추가로 카메라 무빙 제안, 조명 변화까지 포함 가능. |

### 5.3 dialogue 작성 규칙

- **말로 설명하지 않는다** — 상황을 대사로 설명하면 시나리오가 약해진다.
- **행동으로 보여주고, 대사는 감정만 담는다.**
- 대사 없는 씬은 `dialogue: ''`로 처리 (허용).
- 10분 이상인 경우, 전체 씬 중 대사 없는 씬은 25% 이하.

### 5.4 notes 필수 항목

```
러닝타임 MM:SS~MM:SS. [연출 키워드]. [참고 정보].
```

---

## 6. 타임코드 산정 규칙

- 대사 비트 길이: `max(2.0, 글자수 / 6.0)`
- 액션 비트 길이: `max(2.0, 문장수 * 2.5)`
- 씬 길이: 비트 길이 합계(소수점 1자리)
- 전체 길이가 목표와 10% 이상 차이나면 비트 길이를 비례 보정한다.

---

## 7. 작성 워크플로

1. 시놉시스의 `info.runtime`을 파싱한다 → 밀도 테이블 참조.
2. 시놉시스의 `acts[].subtitle` 타임코드를 추출한다 → ACT 경계 설정.
3. 각 ACT 범위 안에 씬을 배분한다 (최소 2씬/ACT).
4. `keyScenes[]`의 핵심 이벤트를 씬에 매핑한다.
5. 각 씬에 `action`, `dialogue`, `notes`를 밀도 기준에 맞게 작성한다.
6. 타임코드 연속성을 검증한다 (갭 없음, 합계 = 런타임).
7. 품질 게이트 체크리스트를 통과시킨다.

---

## 8. 품질 게이트

### 8.1 구조 체크 (자동 검증)

- [ ] 씬 수 ≥ 밀도 테이블 최소값
- [ ] 각 씬 action.length ≥ 밀도 테이블 최소값
- [ ] 각 씬 (action + dialogue).length ≥ 밀도 테이블 최소 total
- [ ] 전체 합계 ≥ 밀도 테이블 전체 최소값
- [ ] 타임코드 연속성 (갭 없음)
- [ ] 타임코드 합계 ≈ 런타임 (±10%)

### 8.2 정합 체크

- [ ] 모든 시놉시스 ACT 범위에 매칭되는 씬이 있음
- [ ] 시놉시스 keyScenes의 핵심 이벤트가 시나리오에 반영됨
- [ ] 시놉시스 characters가 시나리오에 등장함

### 8.3 품질 체크

- [ ] 설명적 대사 배제 (상황을 말로 설명하는 대사 없음)
- [ ] heading의 장소/시간대가 이전 씬과 연속성 있음
- [ ] action에 시각적 구체성이 있음 (추상적 묘사 배제)
- [ ] 모든 씬이 이야기 진행에 필요한가?
- [ ] 다음 단계(줄콘티)가 JSON만으로 컷 분해 가능한가?

---

## 9. 런타임별 같은 사건의 밀도 차이 예시

### 80초 (숏츠)
```
action: '불화살 수백 발이 밤하늘을 가른다. 함대가 불바다.'
→ 27자 action, 2초 컷
```

### 10분 (단편)
```
action: '첫 번째 화공선이 바람을 받아 전속력으로 돌진한다.
뱃머리에서 황개가 홰를 들어올리고, 뒤따르는 병사가 기름
솜뭉치에 불을 붙인다. 화공선 세 척이 삼각 대형으로 함대의
좌현을 향해 달려든다. 조조 함대의 첫 번째 전선이 불길에
감싸이며 쇠사슬로 연결된 옆 배로 화염이 번진다. 바람이
불길을 부채질하고, 어둠 속 장강이 주황빛으로 바뀐다.'
→ 220자 action, 45초 씬
```

---

## 10. 검증 함수 연동

`db.js`의 `updateScreenplay(id, scenes)` 호출 시:
1. 해당 프로젝트의 `synopsis.structured.info.runtime`을 읽는다
2. `getScreenplayDensityRules(runtimeText)` → 밀도 기준 산출
3. `validateScreenplay(scenes, rules)` → 기준 미달 시 에러

---

## 11. 금지 사항

- 촬영 불가능한 추상 내면 문장
- 목적 없는 분위기용 씬
- 타임코드 없는 대사/액션 나열
- 시놉시스 런타임을 무시한 밀도로 작성

---

## 12. 다음 단계 Handoff

- `scenes[]`를 줄콘티 스킬(`storyboard/SKILL.md`) 입력으로 전달한다.
- 변경 요청 시 JSON과 읽기용 본문을 함께 업데이트한다.

*Skill Version: 2.0.0*
*Created: 2026-02-07*
*Updated: 2026-02-08*
*Changelog: v2.0.0 — 런타임 기반 밀도 공식 추가, ACT-씬 정합 규칙 추가, 검증 함수 연동 명세*
